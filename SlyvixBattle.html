<html>
 <head>
  <meta charset="utf-8"/>

<style>
      body {
        margin: 0px;
        padding: 0px;
      }
</style>

  <script type="application/javascript">

var backText = "";
var battle = 0;
var canvas, ctx, x, y, enemypool, maxWidth, lineHeight;  
var enemy_pic = new Image();
var slyvix_pic = new Image();
var foe = ["squigbomb","ripper","mutineer"];
var ability = ["shifty eyes","cowardice","madness","karoake skills"];
var stat = ["Fight","Stealth","Psych"];

//object determines Slyvix
  var slyvix = {
  might : 0,
  stealth : 0,
  psych : 0,
  photo : "pics/SlyvixBest.jpg"
  }
//object determines enemies
  var enemy = {
  might : 0,
  stealth : 0,
  psych : 0,
  name : "",
  photo : ""
  }

//initiates the screen for the canvas
function intit(){
        canvas = document.getElementById("canvas");
        ctx = canvas.getContext("2d");
        y = 60;
        maxWidth = 400;
        lineHeight = 25;
        enemypool = 0;
        battle = 0;
        x = (canvas.width - maxWidth) / 2;
          //main screen
        ctx.fillStyle = "White";
        ctx.fillRect (50, 25, 500, 200);
        //Slyvix Screen
        slyvix_pic.src = slyvix.photo;
        ctx.drawImage(slyvix_pic,50,250);
        //Enemy Screen
        ctx.fillRect (425, 250, 125,125);
        ctx.font="16px Arial";
        ctx.fillStyle = "Red";
        text = "Welcome to version .01 of Slyvix battle. A simple game you should be able to do in a few minutes. Each game, you will face a random enemy of the shadowlabyrinth as SLyvix. Good luck.";
        wrapText(text);
}

function done(){
  if (battle === 10){
    return true;
  }
  else {
    return false;
  }
}

function eraseScreens(){
        // Main text screen
        ctx.fillStyle = "White";
        ctx.clearRect(50,25,500,200);
        ctx.fillRect(50,25,500,200);
}

function gameMain(){
  while(battle <= 3){
    aWildAppears();
    battle++;
  }
}

function compareStats(enemyStat, slyvixStat){
if (enemyStat + diceRoll() === slyvixStat + diceRoll()){
  text = "they are equal";
}
  else if (enemyStat + diceRoll() > slyvixStat + diceRoll()){
    text = "EnemyStronger";
  }
  else{
    text = "Slyvix wins"
  }
  wrapText(text);
}

function raiseSlyvix( ) {
//if certain stat clicked, raise stat by 1.
// then clear stat list.
}

function createEnemyStats(){
  enemy.might = 1;
  enemy.stealth = 1;
  enemy.psych = 1;

  //produce enemy stats
}

function diceRoll(){
  var randomNumber = Math.floor(Math.random() * 5) +1;
  return randomNumber;
}

function arrayRoll(x){
  var stuff = Math.floor(Math.random() * x);
  return stuff;
}

function placePhoto(subject){
   enemy.name = subject;
if (subject === "squigbomb"){
  enemy.photo = "pics/SquigBomb.png";
}
else if (subject === "mutineer") {
enemy.photo = "pics/mutineer.jpg"; 
}
else
enemy.photo = "pics/ripper.jpg";
}

function aWildAppears(){
  var chosenFoe = foe[arrayRoll(foe.length)];
  var chosenAbility = ability[arrayRoll(ability.length)];
  var chosenStat = stat[arrayRoll(stat.length)];
  placePhoto(chosenFoe);
  ctx.clearRect (425,250,125,125);
  enemy_pic.src = enemy.photo;
  ctx.drawImage(enemy_pic,425,250);
  backText = "A wild " + chosenFoe + " has appeared in front of slyvix." + "its " + chosenAbility + " makes it immune to " + chosenStat + "." 
  wrapText(backText);
}

//wraps text in box. allowing for paragraphs
function wrapText(text) {
      eraseScreens();
      ctx.font="16px Arial";
      ctx.fillStyle = "Red";
       var words = text.split(' ');
        var line = '';

        for(var n = 0; n < words.length; n++) {
          var testLine = line + words[n] + ' ';
          var metrics = ctx.measureText(testLine);
          var testWidth = metrics.width;
          if (testWidth > maxWidth && n > 0) {
            ctx.fillText(line, x, y);
            line = words[n] + ' ';
            y += lineHeight;
          }
          else {
            line = testLine;
          }
        } 
        ctx.fillText(line,x,y);
        y = 60;
      }



//draws the canvas
    function draw() {
      intit();
      //wrapText(ctx, aWildAppears(), x, y, maxWidth, lineHeight);
       // gameMain();

        //Custom Buttons
        //var fight_button = new Image();
        //var stealth_button = new Image();
        //var psych_button = new Image();
        //fight_button.src = "pics/Fight_Button.png";
        //stealth_button.src = "pics/Stealth_Button.png";
        //psych_button.src = "pics/Psych_Button.png";
        //load button images
        /*
        fight_button.onload = function() {
        ctx.drawImage(fight_button,275,250);
        }
        stealth_button.onload = function() {
        ctx.drawImage(stealth_button,275,300);
        }
        psych_button.onload = function() {
        ctx.drawImage(psych_button,275,350);
        }
        */ 


        //display text on main screen
      
        //eraseMainScreen(ctx);

        //ctx.font="16px Arial";
        //ctx.fillStyle = "Red";
        
        //wrapText(ctx, backText, x, y, maxWidth, lineHeight);
        //ctx.fillText()

      //}
    }

  </script>
 </head>
 <body bgcolor="#c8e8eb" onload="draw();">
  <div style="width:600px; height:400px; margin: 0 auto; padding: 5px;">
   <canvas id="canvas" width="600"; height="400"; style= "border:1px 
   solid black; background-color:#0B0B3B; border-radius:25px;"></canvas>

    <div style="position:relative; top:-100; left:260">
        <input type="button" value=" Battle " onclick="aWildAppears()">
    </div>
    <div style="position:relative; top:-100; left:200">
        <input type="button" value=" Fight " onclick="compareStats(enemy.might, slyvix.might)">
        <input type="button" value=" Sneak " onclick="compareStats(enemy.stealth, slyvix.stealth)">
        <input type="button" value=" Psych " onclick="compareStats(enemy.psych, slyvix.psych)">
    </div>

 </div>
 <!-- float inputs over canvas -->

 </body>
</html>